/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package test;

import java.awt.event.KeyEvent;
import java.sql.ResultSet;

/**
 *
 * @author Achyut
 */
public class EnterRoll extends javax.swing.JFrame {
//static EnterRoll er=new EnterRoll();

    
    private String action;
    private String type;

    /**
     * Creates new form EnterRoll
     */
    public EnterRoll() {
        initComponents();
        setLocationRelativeTo(null);
    }

    public EnterRoll(String act, String userType) {
        action = act;
        type = userType;
        initComponents();
        setLocationRelativeTo(null);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel7 = new javax.swing.JPanel();
        lblid = new javax.swing.JLabel();
        id = new javax.swing.JTextField();
        lblname = new javax.swing.JLabel();
        name = new javax.swing.JTextField();
        jSeparator4 = new javax.swing.JSeparator();
        submitButton = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle(": : Enter ID/Name : :");
        setResizable(false);

        jPanel7.setBorder(javax.swing.BorderFactory.createTitledBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 51), 2, true), "Enter ID / Name", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 18), new java.awt.Color(0, 102, 255))); // NOI18N

        lblid.setFont(new java.awt.Font("Tahoma", 0, 16)); // NOI18N
        lblid.setText("ID:");

        id.setBackground(java.awt.SystemColor.info);
        id.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        id.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0), 1, true));
        id.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                idActionPerformed(evt);
            }
        });
        id.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                keySubmit(evt);
            }
        });

        lblname.setFont(new java.awt.Font("Tahoma", 0, 16)); // NOI18N
        lblname.setText("Name :");

        name.setBackground(java.awt.SystemColor.info);
        name.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        name.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0), 1, true));
        name.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                keySubmit(evt);
            }
        });

        submitButton.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        submitButton.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/32/checkin.png"))); // NOI18N
        submitButton.setText("Submit");
        submitButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                submitButtonActionPerformed(evt);
            }
        });
        submitButton.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                keySubmit(evt);
            }
        });

        javax.swing.GroupLayout jPanel7Layout = new javax.swing.GroupLayout(jPanel7);
        jPanel7.setLayout(jPanel7Layout);
        jPanel7Layout.setHorizontalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel7Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jSeparator4, javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel7Layout.createSequentialGroup()
                        .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblname)
                            .addComponent(lblid))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(id, javax.swing.GroupLayout.DEFAULT_SIZE, 198, Short.MAX_VALUE)
                            .addComponent(name)))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel7Layout.createSequentialGroup()
                        .addGap(67, 67, 67)
                        .addComponent(submitButton, javax.swing.GroupLayout.PREFERRED_SIZE, 131, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jPanel7Layout.setVerticalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel7Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblid)
                    .addComponent(id, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblname)
                    .addComponent(name, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jSeparator4, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(submitButton, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(16, 16, 16))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(13, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents
    void submit() {
        ResultSet rs=null;
      if(this.id.getText().isEmpty()){
          if(!this.name.getText().isEmpty()){
          
            if(AbstractPerson.ab.IfPersonExists(this.id.getText(), this.name.getText()) != null){
               if(type.equalsIgnoreCase("student")){
                DuplicateName dn = new DuplicateName(this.name.getText(),"student");
                dn.setVisible(true);
               }
               else if(type.equalsIgnoreCase("guest")){
                DuplicateName dn = new DuplicateName(this.name.getText(),"guest");
                dn.setVisible(true);
               }
               else if(type.equalsIgnoreCase("faculty")){
                DuplicateName dn = new DuplicateName(this.name.getText(),"faculty");
                dn.setVisible(true);
               }
               else if(type.equalsIgnoreCase("user")){
                DuplicateName dn = new DuplicateName(this.name.getText(),"user");
                dn.setVisible(true);
               }
               else if(type.equalsIgnoreCase("blacklist")){
                DuplicateName dn = new DuplicateName(this.name.getText(),"blacklist");
                dn.setVisible(true);
               }
               else{
                DuplicateName dn = new DuplicateName(this.name.getText(),"all");
                dn.setVisible(true);
               }
               this.dispose();
            }
            else{
                
                DialogBox.dialog.warningDialog("Person with given name doesnot exist!!!");
            }
        }
          else{
          DialogBox.dialog.errorDialog("Both fields cannot be empty!!!");
          }
//            AbstractPerson.ab.returnDuplicateName(this.name.getText());}
        }
        else if(!this.id.getText().isEmpty()){
            if (Validation.val.validateID(this.id.getText()) == true) {
            {if(!this.name.getText().isEmpty()){
            rs=AbstractPerson.ab.IfPersonExists(this.id.getText(),this.name.getText());
                  if(rs==null){
                      DialogBox.dialog.errorDialog("Person with given details doen't exist");
                  }
                  else display();
                  
                }
            else
            {
                display();
            }
           }
            }
        }
    }
      void display(){
            if (type.equalsIgnoreCase("student")) {
                if (Student.std.ifStudentExists(this.id.getText(), this.name.getText()) == true) {
                    StudentDetailsForm std = new StudentDetailsForm(this.id.getText(), this.name.getText(), action);
                    std.setVisible(true);
                    this.dispose();
                } else {
                    DialogBox.dialog.errorDialog("Student with given details cannot be found!!!");
                }
            }
            if (type.equalsIgnoreCase("faculty")) {
                if (Faculty.fct.ifFacultyExists(this.id.getText(), this.name.getText()) == true) {
                    FacultyDetails fctd = new FacultyDetails(this.id.getText(), this.name.getText(), action);
                    fctd.setVisible(true);
                    this.dispose();
                } else {
                    DialogBox.dialog.errorDialog("Faculty with given details cannot be found!!!");
                }
            }
            if (type.equalsIgnoreCase("guest")) {
                if (Guest.gst.ifGuestExists(this.id.getText(), this.name.getText()) == true) {
                    GuestDetails gstd = new GuestDetails(this.id.getText(), this.name.getText(), action);
                    gstd.setVisible(true);
                    this.dispose();
                } else {
                    DialogBox.dialog.errorDialog("Guest with given details cannot be found!!!");
                }

            }

            if (type.equalsIgnoreCase("blacklist")) {
                if (AbstractPerson.ab.IfPersonExists(this.id.getText(), this.name.getText()) != null) {
                    if (Blacklist.blk.ifBlacklistExists(this.id.getText(), this.name.getText()) == true) {
                        BlacklistDetails blkdetails = new BlacklistDetails(id.getText(), this.name.getText(), action);
                        blkdetails.setVisible(true);
                        this.dispose();

                    } else {
                        DialogBox.dialog.errorDialog("The person with id  " + this.id.getText() + " is  not blacklisted!!!");
                    }

                } else {
                    DialogBox.dialog.errorDialog("Person with given details doesn't exist!!!");

                }
            }
                        if (type.equalsIgnoreCase("user")) {
                if (User.usr.ifUserExists(this.id.getText(), this.name.getText()) == true) {
                    UserDetails usrcon = new UserDetails(this.id.getText(), this.name.getText(), action);
                    usrcon.setVisible(true);
                    this.dispose();
                } else {
                    DialogBox.dialog.errorDialog("User with given details cannot be found!!!");
                }

            }

            }
        
    private void submitButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_submitButtonActionPerformed
        submit();

        // TODO add your handling code here:
    }//GEN-LAST:event_submitButtonActionPerformed
    private void idActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_idActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_idActionPerformed

    private void keySubmit(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_keySubmit
        keyAction(evt);
    }//GEN-LAST:event_keySubmit

    void reset() {
        this.name.setText("");
        this.id.setText("");

    }
    void keyAction(java.awt.event.KeyEvent evt){
        int key = evt.getKeyCode();
        if(key == KeyEvent.VK_ENTER){
            submit();
        }
        if(key == KeyEvent.VK_ESCAPE){
            this.dispose();
          }
        }
    /**
     * @param args the command line arguments
     */
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField id;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JSeparator jSeparator4;
    private javax.swing.JLabel lblid;
    private javax.swing.JLabel lblname;
    private javax.swing.JTextField name;
    private javax.swing.JButton submitButton;
    // End of variables declaration//GEN-END:variables
}
